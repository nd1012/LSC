LSC.instance?console.log("LSC plugin will not override a running LSC",LSC):"text/html"!=document.contentType.toLowerCase().substring(0,9)&&"application/xhtml+xml"!=document.contentType.toLowerCase().substring(0,21)?console.log("LSC plugin will not manage an unknown content type",document.contentType):api.runtime.onMessage.addListener(async(a,b,c)=>{switch(a.type){case"manage":console.debug("LSC plugin management message",a,b),LSC.instance?(console.debug("Update running LSC instance"),await LSC.instance.setSessionStorage(a.session)):(console.debug("Initialize LSC for the website"),LSC.options.isPlugin=!0,LSC.options.useSessionStorage=a.session,await LSC(null,0,a.options.prefetch));break;case"status":var d="inactive";return LSC.instance&&LSC.options.enable&&(d=LSC.instance.getFetchCount()?"loading":"active"),c(d),!0;default:console.warn("Invalid LSC plugin message",a.type);}});