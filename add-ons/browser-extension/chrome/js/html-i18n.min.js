function i18n_translate(a,b,c){const d=chrome||msBrowser||browser,e=d.i18n?["Title","Alt","Value"]:null,f="string"==typeof a,g=f&&b||!f&&c,h=f?a:null,i=f?null:{};if(!d.i18n)return f?"":i;if(f){let a=d.i18n.getMessage(h);return g&&""==a&&(console.warn("Missing translation for \""+h+"\""),console.trace()),a}var j,k,l,m,n;for(const f of document.querySelectorAll("*[data-i18ntext],*[data-i18nhtml]")){k=f.hasAttribute("data-i18nhtml"),j=f.getAttribute(k?"data-i18nhtml":"data-i18ntext"),l=f.hasAttribute("data-i18ninfo")?f.getAttribute("data-i18ninfo"):null,m=d.i18n.getMessage(j),""!=m&&b||(i[j]={message:k?f.innerHTML:f.innerText,description:l,html:k,attr:null,missing:""==m}),""==m||a||(k?f.innerHTML=m:f.innerText=m),g&&""==m&&console.log("Missing translation \""+j+"\"",f);for(const c of e)f.hasAttribute(c)&&(n=j+c,m=d.i18n.getMessage(n),""!=m&&b||(i[n]={message:f.getAttribute(c),description:null==l?null:l+" ("+c+")",html:!1,attr:c.toLowerCase(),missing:""==m}),""==m||a||f.setAttribute(c,m),g&&""==m&&console.log("Missing translation \""+n+"\"",f))}return i}